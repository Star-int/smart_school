(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0968"],{"7O9d":function(e,t,s){"use strict";s.r(t);var n=s("gDS+"),i=s.n(n),o=s("DB9S"),r={data:function(){return{saveBtnDisabled:!1,data:[],defaultProps:{children:"children",label:"name"},roleId:""}},watch:{$route:function(e,t){console.log("路由变化......"),console.log(e),console.log(t),this.init()}},created:function(){this.init()},methods:{init:function(){this.$route.params&&this.$route.params.id&&(this.roleId=this.$route.params.id,this.fetchDataById(this.roleId))},fetchDataById:function(e){var t=this;o.a.toAssign(e).then(function(e){t.data=e.data.children,console.log(i()(t.data));var s=JSON.parse(i()(t.data)),n=[];t.getJsonToList(n,s[0].children),console.log("最终集合"),console.log(n),t.setCheckedKeys(n)})},getJsonToList:function(e,t){for(var s=0;s<t.length;s++)1==t[s].select&&e.push(t[s].id),null!=t[s].children&&this.getJsonToList(e,t[s].children)},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},save:function(){var e=this;this.saveBtnDisabled=!0;var t=this.$refs.tree.getCheckedKeys().join(",");console.log("节点ID"+t),o.a.doAssign(this.roleId,t).then(function(t){t.success&&(e.$message({type:"success",message:"保存成功"}),e.$router.push({path:"/acl/role/list"}))})}}},a=(s("YLet"),s("KHd+")),c=Object(a.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{margin:"20px 20px"}},[t("div",{staticClass:"custom-tree"},[t("el-tree",{ref:"tree",attrs:{data:this.data,"show-checkbox":"","default-expand-all":!1,"node-key":"id","highlight-current":"",props:this.defaultProps}})],1),this._v(" "),t("el-button",{attrs:{disabled:this.saveBtnDisabled,type:"primary"},on:{click:this.save}},[this._v("保存")])],1)},[],!1,null,null,null);c.options.__file="roleForm.vue";t.default=c.exports},"8jNi":function(e,t,s){},DB9S:function(e,t,s){"use strict";var n=s("t3Un"),i="/admin/acl/permission";t.a={getNestedTreeList:function(){return Object(n.a)({url:""+i,method:"get"})},removeById:function(e){return Object(n.a)({url:i+"/remove/"+e,method:"delete"})},saveLevelOne:function(e){return Object(n.a)({url:i+"/save",method:"post",data:e})},update:function(e){return Object(n.a)({url:i+"/update",method:"put",data:e})},toAssign:function(e){return Object(n.a)({url:i+"/toAssign/"+e,method:"get"})},doAssign:function(e,t){return Object(n.a)({url:i+"/doAssign",method:"post",params:{roleId:e,permissionId:t}})}}},YLet:function(e,t,s){"use strict";var n=s("8jNi");s.n(n).a},"gDS+":function(e,t,s){e.exports={default:s("oh+g"),__esModule:!0}},"oh+g":function(e,t,s){var n=s("WEpk"),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}}]);