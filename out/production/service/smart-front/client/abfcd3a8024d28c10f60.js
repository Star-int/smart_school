(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{358:function(t,e,c){"use strict";var r=c(88),o="ucenterservice/collect";e.a={getCollectList:function(t){return Object(r.a)({url:"".concat(o,"/getCollectByUserId/").concat(t),method:"get"})},addCollect:function(t){return Object(r.a)({url:"".concat(o,"/addCollect"),method:"post",data:t})},deleteCollect:function(t){return Object(r.a)({url:"".concat(o,"/deleteCollect"),method:"delete",data:t})}}},360:function(t,e,c){"use strict";var r=c(88);e.a={getPageList:function(t,e,c){return Object(r.a)({url:"/eduservice/course/getfrontCourseList/".concat(t,"/").concat(e),method:"post",data:c})},getNestedTreeList2:function(){return Object(r.a)({url:"/eduservice/subject/list",method:"get"})},getById:function(t){return Object(r.a)({url:"/eduservice/course/getfrontCourseByCourseId/".concat(t),method:"get"})},getCollectList:function(t,e,c){return Object(r.a)({url:"/eduservice/course/searchCollectCourse/".concat(t,"/").concat(e),method:"get",params:{userId:c}})},getAllCourse:function(){return Object(r.a)({url:"/eduservice/course//getAllCourse",method:"get"})}}},388:function(t,e,c){"use strict";c.r(e);var r=c(360),o=c(358),n=c(25),l=c.n(n),d={data:function(){return{list:[],user:{},collectInfo:{},page:1,limit:6,total:0}},created:function(){this.getUserInfo(),this.fetchData()},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=e,r.a.getCollectList(this.page,this.limit,this.user.id).then((function(e){t.list=e.data.data.items.records,t.total=e.data.data.items.total}))},getUserInfo:function(){var t=l.a.get("guli_ucenter");if(t)try{this.user=JSON.parse(t)}catch(t){console.error("JSON 解析失败:",t)}},removeDataById:function(t){var e=this;this.collectInfo.courseId=t,this.collectInfo.userId=this.user.id,o.a.deleteCollect(this.collectInfo).then((function(t){e.$message({type:"success",message:"取消收藏成功"}),e.fetchData(e.page,e.limit,e.user.id)})).catch((function(t){console.error(t),e.$message({type:"error",message:"取消收藏失败"})}))}}},f=c(19),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"page-container"},[c("h1",[t._v("我的课程收藏")]),t._v(" "),c("el-table",{attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","row-class-name":"myClassList"}},[c("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.page-1)*t.limit+e.$index+1))]}}])}),t._v(" "),c("el-table-column",{attrs:{label:"课程信息",width:"470",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[c("div",{staticClass:"info"},[c("div",{staticClass:"pic"},[c("router-link",{attrs:{to:"/course/"+e.row.id}},[c("img",{attrs:{src:e.row.cover,alt:"scope.row.title",width:"150px"}})])],1),t._v(" "),c("div",{staticClass:"title"},[c("a",[t._v(t._s(e.row.title))]),t._v(" "),c("p",[t._v(t._s(e.row.lessonNum)+"课时")])])])]}}])}),t._v(" "),c("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[c("el-button",{staticStyle:{width:"98px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(c){return t.removeDataById(e.row.id)}}},[t._v("取消收藏")])]}}])})],1),t._v(" "),c("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.fetchData}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);