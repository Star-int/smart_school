(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{364:function(t,e,o){"use strict";var n=o(88),r="/flea/goods/";e.a={getAllGoods:function(){return Object(n.a)({url:"".concat(r,"/getAllGoods"),method:"get"})},getGoodsPage:function(t,e,o){return Object(n.a)({url:"".concat(r,"/getGoodsFrontPage/").concat(t,"/").concat(e),method:"get",params:o})},addGoods:function(t){return Object(n.a)({url:"".concat(r,"/addGoods"),method:"post",data:t})},updateGoods:function(t){return Object(n.a)({url:"".concat(r,"/updateGoods"),method:"put",data:t})},getGoodsById:function(t){return Object(n.a)({url:"".concat(r,"/getGoodsById/").concat(t),method:"get"})},deleteGoods:function(t){return Object(n.a)({url:"".concat(r,"/deleteGoodsById/").concat(t),method:"delete"})},getGoodsFrontPage:function(t,e,o){return Object(n.a)({url:"".concat(r,"/getGoodsUserPage/").concat(t,"/").concat(e),method:"get",params:{sellerId:o}})},upOrDownGoods:function(t,e){return Object(n.a)({url:"".concat(r,"/upOrDownGoods"),method:"put",params:{goodsId:t,status:e}})}}},365:function(t,e,o){var content=o(412);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("218304ca",content,!0,{sourceMap:!1})},411:function(t,e,o){"use strict";var n=o(365);o.n(n).a},412:function(t,e,o){(e=o(15)(!1)).push([t.i,".app-container{justify-content:center;margin-left:200px;margin-top:-70px;width:100%}.description-container{width:180px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.description-text{cursor:pointer}",""]),t.exports=e},457:function(t,e,o){"use strict";o.r(e);var n=o(364),r=o(25),c=o.n(r),l={data:function(){return{goodsList:[],user:{},searchObj:{productName:"",price:"",category:""},page:1,limit:6,total:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.getUserInfo(),this.page=e,console.log(this.page),console.log(this.limit),n.a.getGoodsFrontPage(this.page,this.limit,this.user.id).then((function(e){t.goodsList=e.data.data.items.records,t.total=e.data.data.items.total,console.log(JSON.stringify(t.goodsList))})).catch((function(t){console.log(t)}))},getUserInfo:function(){var t=c.a.get("guli_ucenter");if(t)try{this.user=JSON.parse(t),this.goodsList.sellerId=this.user.id,console.log("成功解析 JSON 数据")}catch(t){console.error("JSON 解析失败:",t)}},handleChangeStatus:function(t,e){var o=this;n.a.upOrDownGoods(t,e).then((function(t){!0===e?o.$message({type:"success",message:"上架成功"}):o.$message({type:"success",message:"下架成功"})}))},resetData:function(){this.searchObj={productName:"",price:"",category:""},this.fetchData()},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.a.deleteGoods(t).then((function(t){e.fetchData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(t){e.$message({type:"error",message:"删除失败!"})}))}))}}},d=(o(411),o(19)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[t._m(0),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsList,border:""}},[o("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"el-icon"}),t._v(" "),o("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s((t.page-1)*t.limit+e.$index+1))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品图片",width:"200",prop:"cover"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:"/flea/"+t.row.id}},[o("img",{staticStyle:{height:"100px",width:"100%","object-fit":"cover"},attrs:{src:t.row.cover}})])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品名称",width:"100",prop:"productName"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.productName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"交易方式",width:"100px",prop:"transactionMethod"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.transactionMethod))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品描述",width:"180px",prop:"description"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"description-container"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.description,placement:"top"}},[o("span",{domProps:{innerHTML:t._s(e.row.description)}})])],1)]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品价格",width:"100",prop:"price",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v("￥"+t._s(e.row.price))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"状态",width:"100",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return t.handleChangeStatus(e.row.id,e.row.status)}},model:{value:e.row.status,callback:function(o){t.$set(e.row,"status",o)},expression:"scope.row.status"}}),t._v(" "),o("span",[t._v(t._s(e.row.status?"上架":"下架"))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("router-link",{attrs:{to:"/flea/edit/"+e.row.id}},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"}},[t._v("编辑")])],1),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,total:parseInt(t.total),layout:"total, prev, pager, next, jumper"},on:{"current-change":t.fetchData}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"tac pt20"},[e("a",{staticClass:"comm-btn c-btn-2",staticStyle:{"margin-right":"1000px",color:"red"},attrs:{href:"/flea/add",title:"再卖一件"}},[this._v("再卖一件")])])}],!1,null,null,null);e.default=component.exports}}]);