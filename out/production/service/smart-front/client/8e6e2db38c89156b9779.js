(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{360:function(e,t,n){"use strict";var o=n(88);t.a={getPageList:function(e,t,n){return Object(o.a)({url:"/eduservice/course/getfrontCourseList/".concat(e,"/").concat(t),method:"post",data:n})},getNestedTreeList2:function(){return Object(o.a)({url:"/eduservice/subject/list",method:"get"})},getById:function(e){return Object(o.a)({url:"/eduservice/course/getfrontCourseByCourseId/".concat(e),method:"get"})},getCollectList:function(e,t,n){return Object(o.a)({url:"/eduservice/course/searchCollectCourse/".concat(e,"/").concat(t),method:"get",params:{userId:n}})},getAllCourse:function(){return Object(o.a)({url:"/eduservice/course//getAllCourse",method:"get"})}}},361:function(e,t,n){"use strict";var o=n(88),c="/application/student";t.a={getStudentInfoByUserId:function(e){return Object(o.a)({url:"".concat(c,"/getStudentInfoByUserId/").concat(e),method:"get"})},addStudent:function(e){return Object(o.a)({url:"".concat(c,"/addStudent"),method:"post",data:e})},getUndefineStudent:function(){return Object(o.a)({url:"".concat(c,"/getUndefineStuedentInfo"),method:"get"})},updateStudent:function(e){return Object(o.a)({url:"".concat(c,"/updateStudent"),method:"put",data:e})}}},371:function(e,t,n){"use strict";var o=n(5),c=n(129)(5),r=!0;"find"in[]&&Array(1).find((function(){r=!1})),o(o.P+o.F*r,"Array",{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),n(128)("find")},380:function(e,t,n){"use strict";var o=n(88),c="/application/selection";t.a={getAllSelection:function(){return Object(o.a)({url:"".concat(c,"/getAllSelection"),method:"get"})},getSelectionPage:function(e,t,n){return Object(o.a)({url:"".concat(c,"/getSelectionPage/").concat(e,"/").concat(t),method:"get",params:{studentId:n}})},addSelection:function(e){return Object(o.a)({url:"".concat(c,"/addSelection"),method:"post",data:e})},updateSelection:function(e){return Object(o.a)({url:"".concat(c,"/updateStudent"),method:"put",data:e})},deteleSelection:function(e){return Object(o.a)({url:"".concat(c,"/deleteSelectionById/").concat(e),method:"delete"})},deteleSelectionsByStudentId:function(e){return Object(o.a)({url:"".concat(c,"/deleteSelectionsByStudentId/").concat(e),method:"delete"})},deleteBrachByStudentId:function(e){return Object(o.a)({url:"".concat(c,"/deleteSelectionsByStudentId"),method:"delete",data:e})},deleteBrach:function(e){return Object(o.a)({url:"".concat(c,"/deteleBrach"),method:"delete",data:e})}}},461:function(e,t,n){"use strict";n.r(t);n(44),n(371),n(57);var o=n(380),c=n(360),r=n(361),l=n(25),d=n.n(l),f={data:function(){return{user:{},dialogVisible:!1,selectionCourse:{},SelectionsList:[],courseList:[],selectedCourse:[],page:1,limit:10,total:0,studentId:""}},created:function(){this.fetchData()},computed:{filteredCourseList:function(){var e=this;return this.courseList.filter((function(t){return!e.isCourseSelected(t.title)}))}},methods:{fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.getUserInfo(),this.page=t,c.a.getAllCourse().then((function(t){e.courseList=t.data.data.list})),r.a.getStudentInfoByUserId(this.user.id).then((function(t){e.studentId=t.data.data.items.studentId,console.log("学生id为"+e.studentId),o.a.getSelectionPage(e.page,e.limit,e.studentId).then((function(t){e.SelectionsList=t.data.data.items.records,e.total=t.data.data.items.total}))}))},getUserInfo:function(){var e=d.a.get("guli_ucenter");if(e)try{this.user=JSON.parse(e),console.log("成功解析 JSON 数据")}catch(e){console.error("JSON 解析失败:",e)}},handleAdd:function(){var e=this;this.selectionCourse.studentId=this.studentId,o.a.addSelection(this.selectionCourse).then((function(t){e.fetchData(e.page),e.dialogVisible=!1,e.$message({type:"success",message:"添加成功!"})}))},handleCourseChange:function(){var e=this,t=this.courseList.find((function(t){return t.title===e.selectionCourse.courseName}));t&&(this.selectionCourse.courseId=t.id,console.log("选中的课程ID是："+this.selectionCourse.courseId))},isCourseSelected:function(e){return this.SelectionsList.some((function(t){return t.courseName===e}))},handleSelectionChange:function(e){this.selectedCourse=e},handleBatchDelete:function(){var e=this;0!==this.selectedCourse.length?this.$confirm("此操作将永久删除这些信息，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.selectedCourse.map((function(e){return e.id}));o.a.deleteBrach(t).then((function(t){e.fetchData(e.page),e.$message({type:"success",message:"删除成功!"})})).catch((function(t){e.$message({type:"error",message:"删除失败!"})}))})):this.$message({type:"warning",message:"请选择要删除的记录!"})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除这些信息，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.a.deteleSelection(e).then((function(e){t.fetchData(t.page),t.$message({type:"success",message:"删除成功!"})})).catch((function(e){t.$message({type:"error",message:"删除失败!"})}))}))}}},h=n(19),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("选课中心")]),e._v(" "),n("el-button",{staticStyle:{height:"42px"},attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加选课")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.handleBatchDelete}},[e._v("批量删除")]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.SelectionsList,border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon"}),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s((e.page-1)*e.limit+t.$index+1))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"课程名称",width:"300",heght:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:"/course/"+t.row.courseId}},[n("el-button",{attrs:{type:"text"}},[e._v(e._s(t.row.courseName))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"courseForm",attrs:{model:e.selectionCourse,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"课程id"}},[n("el-input",{staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.selectionCourse.courseId,callback:function(t){e.$set(e.selectionCourse,"courseId",t)},expression:"selectionCourse.courseId"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"课程名称"}},[n("el-select",{attrs:{placeholder:"请选择课程名称",filterable:""},on:{change:e.handleCourseChange},model:{value:e.selectionCourse.courseName,callback:function(t){e.$set(e.selectionCourse,"courseName",t)},expression:"selectionCourse.courseName"}},e._l(e.filteredCourseList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.title}})})),1)],1),e._v(" "),n("div",{staticStyle:{"margin-left":"200px"}},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确定")])],1)],1)],1),e._v(" "),n("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":e.page,"page-size":e.limit,total:parseInt(e.total),layout:"total, prev, pager, next, jumper"},on:{"current-change":e.fetchData}})],1)}),[],!1,null,"03d73e94",null);t.default=component.exports}}]);