(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{363:function(e,t,r){var content=r(410);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("67e9ccf0",content,!0,{sourceMap:!1})},370:function(e,t,r){"use strict";var o=r(88);t.a={updateUserInfo:function(e){return Object(o.a)({url:"/ucenterservice/apimember/updateUserInfo",method:"put",data:e})},getSellerList:function(){return Object(o.a)({url:"/ucenterservice/apimember/getAllucenter",method:"get"})},updatePassword:function(e){return Object(o.a)({url:"/ucenterservice/apimember/updatePassword",method:"put",data:e})}}},409:function(e,t,r){"use strict";var o=r(363);r.n(o).a},410:function(e,t,r){(t=r(15)(!1)).push([e.i,".el-form-item__label[data-v-09e12200]{font-weight:700}.el-upload[data-v-09e12200]{border-radius:50%}.avatar-uploader .el-upload[data-v-09e12200]{border:1px dashed #d9d9d9;cursor:pointer;position:relative;overflow:hidden;border-radius:50%}.avatar-uploader .el-upload[data-v-09e12200]:hover{border-color:#409eff}.avatar-uploader-icon[data-v-09e12200]{font-size:28px;color:#8c939d;line-height:120px;text-align:center}.avatar[data-v-09e12200],.avatar-uploader-icon[data-v-09e12200]{width:120px;height:120px;border-radius:50%}.avatar[data-v-09e12200]{display:block}",""]),e.exports=t},456:function(e,t,r){"use strict";r.r(t);r(192);var o=r(25),l=r.n(o),n=r(370),c={data:function(){return{user:{avatar:"https://guili-wenjian.oss-cn-guangzhou.aliyuncs.com/avatar/keli.jpeg"},dialogVisible:!1,newPassword:"",confirmPassword:"",confirmPasswordRules:[{validator:this.validateConfirmPassword,trigger:"blur"}]}},created:function(){this.showInfo()},mounted:function(){var e=this;this.$nextTick((function(){console.log(e.$refs.formRef)}))},methods:{showInfo:function(){var e=l.a.get("guli_ucenter");if(e)try{this.user=JSON.parse(e),console.log("成功解析 JSON 数据"),console.log(JSON.stringify(this.user.nickname))}catch(e){console.error("JSON 解析失败:",e)}},update:function(){var e=this;n.a.updateUserInfo(this.user).then((function(t){e.$message.success("保存成功"),l.a.set("guli_ucenter",JSON.stringify(e.user),{domain:"localhost"}),e.showInfo()})).catch((function(e){console.log(e.message)}))},validateConfirmPassword:function(e,t,r){""===this.confirmPassword?r(new Error("请再次输入密码")):this.confirmPassword!==this.newPassword?r(new Error("两次输入密码不一致")):r()},handleAvatarSuccess:function(e){var t=e.split("\\").pop();this.user.avatar="http://localhost:9528/src/static/img/userAvatar/"+t,console.log("图片名称:",t)},openDiag:function(){this.dialogVisible=!0},updatePassword:function(){var e=this;n.a.updatePassword(this.user).then((function(t){e.$message.success("密码修改成功，请重新登录！"),l.a.set("guli_token","",{domain:"localhost"}),l.a.set("guli_ucenter","",{domain:"localhost"}),e.$router.push({path:"/login"})})).catch((function(t){console.log(t.message),e.$message.error("密码修改失败！"),e.dialogVisible=!1,e.newPassword="",e.confirmPassword="",e.$refs.formRef.resetFields()}))},save:function(){var e=this;this.$refs.formRef.validate((function(t){if(!t)return!1;e.user.password=e.newPassword,e.updatePassword(),e.dialogVisible=!1}))}}},d=(r(409),r(19)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",[r("el-form",{staticStyle:{"padding-left":"300px",width:"50%"},attrs:{model:e.user,"label-width":"80px"}},[r("div",{staticStyle:{margin:"15px","text-align":"center"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8222/ucenterservice/upload/avatar","on-success":e.handleAvatarSuccess,"show-file-list":!1,limit:20971520}},[e.user.avatar?r("img",{staticClass:"avatar",attrs:{src:e.user.avatar}}):e._e()])],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"mobile"}},[r("el-input",{attrs:{placeholder:"用户名",disabled:""},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"nickname"}},[r("el-input",{attrs:{placeholder:"姓名"},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{attrs:{placeholder:"电话"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地址",prop:"address"}},[r("el-input",{attrs:{placeholder:"地址"},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"个性签名",prop:"sign"}},[r("el-input",{attrs:{type:"text",placeholder:"个性签名"},model:{value:e.user.sign,callback:function(t){e.$set(e.user,"sign",t)},expression:"user.sign"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"年龄",prop:"age"}},[r("el-input",{attrs:{placeholder:"年龄"},model:{value:e.user.age,callback:function(t){e.$set(e.user,"age",t)},expression:"user.age"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"微信",prop:"openid"}},[r("el-input",{attrs:{placeholder:"微信"},model:{value:e.user.openid,callback:function(t){e.$set(e.user,"openid",t)},expression:"user.openid"}})],1),e._v(" "),r("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[r("el-button",{attrs:{type:"danger"},on:{click:e.openDiag}},[e._v("修改密码")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保 存")])],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"formRef",staticStyle:{"padding-right":"20px"},attrs:{model:e.user,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[r("el-input",{attrs:{"show-password":"",placeholder:"新密码"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword",rules:e.confirmPasswordRules}},[r("el-input",{attrs:{"show-password":"",placeholder:"确认密码"},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"09e12200",null);t.default=component.exports}}]);