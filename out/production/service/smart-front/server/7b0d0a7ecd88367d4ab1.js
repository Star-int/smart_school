exports.ids=[34],exports.modules={103:function(e,t,l){"use strict";l.r(t);var n=l(77),o=l(66),r=l(4),d=l.n(r),c={data:()=>({user:{},dialogVisible:!1,selectedLeaves:[],searchObj:{},leaveList:[],leaveInfo:[],page:1,limit:10,total:0,studentId:""}),created(){this.fetchData()},methods:{fetchData(e=1){this.getUserInfo(),this.page=e,o.a.getStudentInfoByUserId(this.user.id).then(e=>{this.studentId=e.data.data.items.studentId,console.log("学生id为"+this.studentId),this.searchObj.studentId=this.studentId,n.a.getPageById(this.page,this.limit,this.searchObj).then(e=>{this.leaveList=e.data.data.items.records,console.log(JSON.stringify(this.searchObj)),this.total=e.data.data.items.total})})},getUserInfo(){var e=d.a.get("guli_ucenter");if(e)try{this.user=JSON.parse(e),console.log("成功解析 JSON 数据")}catch(e){console.error("JSON 解析失败:",e)}},resetData(){this.searchObj.studentId=this.studentId,this.fetchData()},handleApproval(e,t){1!=t?this.dialogVisible=!0:this.$message({message:"已通过，无法修改",type:"warning"}),n.a.getLeaveById(e).then(e=>{this.leaveInfo=e.data.data.items})},handleSelectionChange(e){this.selectedLeaves=e},handleBatchDelete(){0!==this.selectedLeaves.length?this.$confirm("此操作将永久删除这些信息，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.selectedLeaves.map(e=>e.id);n.a.deleteBrach(e).then(e=>{this.$message({type:"success",message:"删除成功!"}),this.fetchData(this.page)}).catch(e=>{this.$message({type:"error",message:"删除失败!"})})}):this.$message({type:"warning",message:"请选择要删除的记录!"})},updateLeave(){this.leaveInfo.status="0",n.a.updateLeave(this.leaveInfo).then(e=>{this.$message({type:"success",message:"修改成功"}),this.dialogVisible=!1,this.fetchData()})},handleDelete(e){this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{n.a.deleteLeaveById(e).then(e=>{this.$message({type:"success",message:"删除成功"}),this.fetchData(this.page)}).catch(e=>{this.$message({type:"error",message:"删除失败"})})})}}},v=l(3);var component=Object(v.a)(c,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"leave-list-page"},[e._ssrNode("<h1>请假记录</h1> "),l("el-button",{attrs:{type:"danger"},on:{click:e.handleBatchDelete}},[e._v("批量删除")]),e._ssrNode(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.leaveList,border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"el-icon"}),e._v(" "),l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s((e.page-1)*e.limit+t.$index+1))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"学生姓名",width:"100px",prop:"studentName"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.studentName))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"请假类型",width:"100px",prop:"leaveType"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.leaveType))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"原因",prop:"reason",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.reason,placement:"top-start"}},[l("span",[e._v(e._s(t.row.reason.length>6?t.row.reason.substring(0,6)+"...":t.row.reason))])])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"开始日期",width:"150px",prop:"startDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.startDate))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"结束日期",width:"150px",prop:"endDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.endDate))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"状态",prop:"status",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?l("el-tag",{attrs:{type:"info"}},[e._v("未审批")]):e._e(),e._v(" "),1==t.row.status?l("el-tag",{attrs:{type:"success"}},[e._v("通过")]):e._e(),e._v(" "),2==t.row.status?l("el-tag",{attrs:{type:"danger"}},[e._v("未通过")]):e._e()]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"意见",prop:"comment",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.comment,placement:"top-start"}},[l("span",[e._v(e._s(t.row.comment.length>6?t.row.comment.substring(0,6)+"...":t.row.comment))])])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(l){return e.handleApproval(t.row.id,t.row.status)}}},[e._v("修改")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._ssrNode(" "),l("el-dialog",{attrs:{title:"修改请假信息",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{attrs:{model:e.leaveInfo,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"学生姓名"}},[l("el-input",{attrs:{disabled:""},model:{value:e.leaveInfo.studentName,callback:function(t){e.$set(e.leaveInfo,"studentName",t)},expression:"leaveInfo.studentName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"开始日期"}},[l("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00"},model:{value:e.leaveInfo.startDate,callback:function(t){e.$set(e.leaveInfo,"startDate",t)},expression:"leaveInfo.startDate"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"结束日期"}},[l("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00"},model:{value:e.leaveInfo.endDate,callback:function(t){e.$set(e.leaveInfo,"endDate",t)},expression:"leaveInfo.endDate"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"请假类型"}},[l("el-select",{attrs:{placeholder:"请选择请假类型"},model:{value:e.leaveInfo.leaveType,callback:function(t){e.$set(e.leaveInfo,"leaveType",t)},expression:"leaveInfo.leaveType"}},[l("el-option",{attrs:{label:"病假",value:"病假"}}),e._v(" "),l("el-option",{attrs:{label:"事假",value:"事假"}}),e._v(" "),l("el-option",{attrs:{label:"探亲假",value:"探亲假"}}),e._v(" "),l("el-option",{attrs:{label:"婚假",value:"婚假"}}),e._v(" "),l("el-option",{attrs:{label:"丧假",value:"丧假"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"请假原因"}},[l("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入请假原因"},model:{value:e.leaveInfo.reason,callback:function(t){e.$set(e.leaveInfo,"reason",t)},expression:"leaveInfo.reason"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"审批意见"}},[l("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入审批意见",disabled:""},model:{value:e.leaveInfo.comment,callback:function(t){e.$set(e.leaveInfo,"comment",t)},expression:"leaveInfo.comment"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.updateLeave}},[e._v("确 定")])],1)],1),e._ssrNode(" "),l("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":e.page,"page-size":e.limit,total:parseInt(e.total),layout:"total, prev, pager, next, jumper"},on:{"current-change":e.fetchData}})],2)}),[],!1,(function(e){}),null,"fcfbdea8");t.default=component.exports},66:function(e,t,l){"use strict";var n=l(12);const o="/application/student";t.a={getStudentInfoByUserId:e=>Object(n.a)({url:`${o}/getStudentInfoByUserId/${e}`,method:"get"}),addStudent:e=>Object(n.a)({url:`${o}/addStudent`,method:"post",data:e}),getUndefineStudent:()=>Object(n.a)({url:`${o}/getUndefineStuedentInfo`,method:"get"}),updateStudent:e=>Object(n.a)({url:`${o}/updateStudent`,method:"put",data:e})}},77:function(e,t,l){"use strict";var n=l(12);const o="/application/leave";t.a={getAllLeavePage:(e,t,l)=>Object(n.a)({url:`${o}/getAllLeavePage/${e}/${t}`,method:"get",params:l}),getPageById:(e,t,l)=>Object(n.a)({url:`${o}/getAllLeaveByIdPage/${e}/${t}`,method:"get",params:l}),getLeaveById:e=>Object(n.a)({url:`${o}/getLeaveInfoById/${e}`,method:"get"}),deleteLeaveById:e=>Object(n.a)({url:`${o}/deleteLeaveById/${e}`,method:"delete"}),updateLeave:e=>Object(n.a)({url:`${o}/updateLeave`,method:"put",data:e}),deleteBrach:e=>Object(n.a)({url:`${o}/deleteBrach`,method:"delete",data:e}),addLeave:e=>Object(n.a)({url:`${o}/addLeave`,method:"post",data:e})}}};