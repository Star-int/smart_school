(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ea16"],{"60LB":function(t,e,i){},"7Ywu":function(t,e,i){"use strict";var s=i("60LB");i.n(s).a},L6ED:function(t,e,i){"use strict";i.r(e);var s=i("QbLZ"),o=i.n(s),a=i("Pl4H"),n={data:function(){return{listLoading:!1,filterText:"",subjectList:[],defaultProps:{children:"children",label:"title"},dialogVisible:!1,dialogTitle:"",formData:{id:"",title:""},formRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}]}}},watch:{filterText:function(t){this.$refs.subjectTree.filter(t)}},created:function(){this.fetchNodeList()},methods:{fetchNodeList:function(){var t=this;a.a.getNestedTreeList().then(function(e){!0===e.success&&(t.subjectList=e.data.items)})},filterNode:function(t,e){return!t||-1!==e.title.indexOf(t)},update:function(t){},showAddOneLevelDialog:function(){this.dialogTitle="添加一级分类",this.formData={},this.dialogVisible=!0},showAddDialog:function(t){this.dialogTitle="添加",this.formData={},this.formData.parentId=t.id,this.dialogVisible=!0},showEditDialog:function(t){this.dialogTitle="编辑",this.formData=o()({},t),this.dialogVisible=!0},saveForm:function(){var t=this;"编辑"===this.dialogTitle&&a.a.updateSubject(this.formData).then(function(e){t.fetchNodeList(),t.$message.success("添加成功")}).catch(function(t){console.error(t)}),"添加"===this.dialogTitle&&a.a.addTwoSubject(this.formData).then(function(e){t.fetchNodeList(),t.$message.success("添加成功")}).catch(function(t){console.error(t)}),"添加一级分类"===this.dialogTitle&&a.a.addOneSuject(this.formData).then(function(e){t.fetchNodeList(),t.$message.success("添加成功")}).catch(function(t){console.error(t)}),this.dialogVisible=!1},resetForm:function(){this.$refs.form.resetFields()},removeDataById:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return a.a.deleteSubjuct(t)}).then(function(){e.fetchNodeList(),e.$message({type:"success",message:"删除成功!"})}).catch(function(t){"cancel"===t?e.$message({type:"info",message:"已取消删除"}):e.$message({type:"error",message:"删除失败"})})}}},r=(i("7Ywu"),i("KHd+")),l=Object(r.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-input",{staticStyle:{"margin-bottom":"30px"},attrs:{placeholder:"Filter keyword"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),i("el-button",{attrs:{type:"success"},on:{click:t.showAddOneLevelDialog}},[t._v("添加一级分类")]),t._v(" "),i("router-link",{attrs:{to:"/course/updateSubject"}},[i("el-button",{staticStyle:{height:"42px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus"}},[t._v("修改")])],1),t._v(" "),i("el-tree",{ref:"subjectTree",staticClass:"filter-tree",attrs:{data:t.subjectList,props:t.defaultProps,"filter-node-method":t.filterNode,"default-expand-all":!0},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,o=e.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[t._v(t._s(s.label))]),t._v(" "),i("span",{staticClass:"custom-tree-button"},[o.children?i("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(){return t.showAddDialog(o)}}},[t._v("添加")]):t._e(),t._v(" "),i("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(){return t.showEditDialog(o)}}},[t._v("编辑")]),t._v(" "),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"medium"},on:{click:function(){return t.removeDataById(o.id)}}},[t._v("删除")])],1)])}}])}),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.formData,rules:t.formRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.saveForm}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:t.resetForm}},[t._v("重置")])],1)],1)],1)],1)},[],!1,null,null,null);l.options.__file="list.vue";e.default=l.exports},Pl4H:function(t,e,i){"use strict";var s=i("t3Un"),o="/eduservice/subject";e.a={getNestedTreeList:function(t,e){return Object(s.a)({url:o+"/list",method:"get"})},getNestedTreeListPage:function(t,e){return Object(s.a)({url:o+"/list1/"+t+"/"+e,method:"get"})},addOneSuject:function(t){return Object(s.a)({url:o+"/addOneSuject",method:"post",data:t})},addTwoSubject:function(t){return Object(s.a)({url:o+"/addTwoSubject",method:"post",data:t})},deleteSubjuct:function(t){return Object(s.a)({url:o+"/deleteSubject/"+t,method:"delete"})},updateSubject:function(t){return Object(s.a)({url:o+"/updateSubject",method:"put",data:t})}}}}]);